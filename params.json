{"name":"Fhirball","tagline":"An Express router for a nodejs+MongoDB FHIR server","body":"![fhirball](./res/branding/fhirball@2x-76@2x.png)\r\n\r\nfhirball\r\n========\r\nAn Express router for persisting [HL7 FHIR](http://www.hl7.org/implement/standards/fhir/) resources in MongoDB. \r\nProvides a RESTful API that partially implements the FHIR DSTU 1 proposal.\r\nService configuration is defined using a Conformance resource. \r\nThe server performs only trivial validation - if you post well-formed resources then you can read well-formed resources!\r\n\r\nPrerequisites\r\n-------------\r\nNode.js 10+, MongoDB 2.6+\r\n\r\nUse\r\n---\r\nTo install fhirball:\r\n\r\n    $ npm install fhirball\r\n    $ npm install express\r\n\r\nTo use fhirball create a javascript file and reference express and fhirball packages:\r\n\r\n    var express = require('express');\r\n    var fhirball = require('fhirball');\r\n\r\nDeclare the conformance statement for the server. The conformance statement is parsed on startup and used to generate \r\nresource interactions and searches. SearchParams have been extended with a non-standard field (document) defining\r\nthe document paths to be searched and whether an index should be created to support the search. For example, to create\r\na Master Patient Index with basic audit capability:\r\n\r\n    var conformance = {\r\n        resourceType: 'Conformance',\r\n        publisher: 'Fhirball',\r\n        date: new Date(),\r\n        software: {\r\n            name: 'fhirball',\r\n            version: '0.0.2'\r\n        },\r\n        implementation: {\r\n            description: 'Master Patient Index service',\r\n            url: 'http://127.0.0.1:1337/fhir/'\r\n        },\r\n        fhirVersion: '0.0.82',\r\n        rest: [\r\n            {\r\n                mode: 'server',\r\n                resource: [\r\n                    {\r\n                        type: 'Patient',\r\n                        operation: [\r\n                            {code: 'read'},\r\n                            {code: 'update'},\r\n                            {code: 'delete'},\r\n                            {code: 'create'},\r\n                            {code: 'search-type'}\r\n                        ],\r\n                        searchParam: [\r\n                            {\r\n                                name: 'address',\r\n                                type: 'string',\r\n                                documentation: 'An address in any kind of address/part of the patient. Case-sensitive.',\r\n                                document: {\r\n                                    path: ['Patient.address.text', 'Patient.address.line', 'Patient.address.city', 'Patient.address.state', 'Patient.address.zip', 'Patient.address.country'],\r\n                                    index: true\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'animal-breed',\r\n                                type: 'token',\r\n                                documentation: 'The breed for animal patients',\r\n                                document: {\r\n                                    path: ['Patient.animal.breed.coding.code'],\r\n                                    index: true\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'name',\r\n                                type: 'string',\r\n                                documentation: 'A portion of the family name of the patient. Case-sensitive.',\r\n                                document: {\r\n                                    path: ['Patient.name.family', 'Patient.name.given'],\r\n                                    index: true\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'family',\r\n                                type: 'string',\r\n                                documentation: 'A portion of the family name of the patient. Case-sensitive.',\r\n                                document: {\r\n                                    path: ['Patient.name.family']\r\n                                    //search will use name index\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'given',\r\n                                type: 'string',\r\n                                documentation: 'A portion of the given name of the patient. Case-sensitive.',\r\n                                document: {\r\n                                    path: ['Patient.name.given'],\r\n                                    index: true\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'identifier',\r\n                                type: 'token',\r\n                                documentation: 'A patient identifier',\r\n                                document: {\r\n                                    path: ['Patient.identifier.value'],\r\n                                    index: true\r\n                                }\r\n                            },\r\n                            {\r\n                                name: 'gender',\r\n                                type: 'token',\r\n                                documentation: 'Gender of the patient',\r\n                                document: {\r\n                                    path: ['Patient.gender.code']\r\n                                    //index low specificity\r\n                                }\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        type: 'SecurityEvent',\r\n                        operation: [\r\n                            {code: 'read'},\r\n                            {code: 'create'},\r\n                            {code: 'search-type'}\r\n                        ],\r\n                        searchParam: [\r\n                        ]\r\n                    }\r\n                ]\r\n\r\n            }\r\n        ]\r\n    };\r\n\r\nDeclare fhirball options, a mongodb connection string, the conformance statement and the content-type (currently must\r\nbe application/json)\r\n\r\n    var options = {\r\n        db: 'mongodb://localhost/fhirball-demo',\r\n        conformance: conformance,\r\n        'content-type': 'application/json'\r\n    };\r\n\r\nCreate and start app using fhirball router to provide FHIR api:\r\n    \r\n    var app = express();\r\n    app.use('/fhir/', new fhirball.Router(options));\r\n\r\n    //start the app\r\n    app.listen(1337);\r\n    console.log(conformance.implementation.description,'listening for requests on port 1337');\r\n\r\nTest\r\n----\r\nTo execute unit tests:\r\n\r\n    npm install\r\n    mocha --recursive ./test/spec\r\n\r\nTo execute integration tests, performing CRUD operations on each sample resource:\r\n\r\n    mocha --recursive ./test/e2e\r\n\r\nIntegration tests assume a mongod instance running on localhost.\r\n\r\nCopyright\r\n---------\r\nCopyright 2014 Black Pear Software Ltd.\r\n\r\nThis material contains content from HL7. Unless otherwise noted in the filename, sample FHIR resources in \r\ntest/e2e/data are Â© HL7.org 2011+ and used under license (http://www.hl7.org/implement/standards/fhir/license.html)\r\n\r\nLicense\r\n-------\r\nfhirball is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nfhirball is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nAcknowledgements\r\n----------------\r\nSupported by [Black Pear Software](www.blackpear.com)\r\n \r\nAdditional contributions from [freshEHR](http://freshehr.com/)\r\n\r\n![HL7 FHIR](./res/branding/fhir-logo-www.png)\r\n![Powered by MongoDB](./res/branding/mongodb-powered-by-badge-white.jpg)\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}